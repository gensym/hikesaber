<html>
  <head>
    <title>Count by Time of Day</title>
    <link href="css/styles.css" rel="stylesheet">
    <script type="text/javascript" src="js/d3/d3.min.js"></script>
    <script type="text/javascript" src="js/jquery/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/barChart.js"></script>
  </head>
  <body>
    <script type="text/javascript">

      if ( typeof String.prototype.endsWith != 'function' ) {
        String.prototype.endsWith = function( str ) {
          return this.substring(this.length - str.length, this.length ) === str;
        }
      };

      function xTickFormatter(s) {
          return (s.endsWith(":00") &&
                 (parseInt(s.substring(0, 2))% 4 === 0)) ? s : "" ;
      }

      function xFunction(d) {
          return d.time;
      }

      function yFunction(d) {
          return d.count;
      }

      $(function() {
	  d3.json("/time-of-day-counts.json", function(error, dataset) {
              makeChart(xFunction, yFunction, "svg#display", dataset).
                  drawChart().
                  addXAxis().
                  addYAxis();
	  });
      });
    </script>
    <svg id="display" style="height:500px;width:950px"></svg>
  </body>
</html>
